function jsonTagSendData(e,t,n,i,o,r){r&&(t=function e(t){if(Array.isArray(t))return t.map(e).filter((e=>!(null==e||""===e||"object"==typeof e&&0===Object.keys(e).length)));if("object"==typeof t&&null!==t)return Object.fromEntries(Object.entries(t).map((([t,n])=>[t,e(n)])).filter((([,e])=>!(null==e||""===e||"object"==typeof e&&0===Object.keys(e).length))));return t}(t));const s=/AppleWebKit/i.test(navigator.userAgent)&&!/Chrome|CriOS|OPR|Edg|Edge|FxiOS|SamsungBrowser|Android/i.test(navigator.userAgent);let a={"Content-Type":"application/json"};function c(e,t){if(t){const n=t.dataLayerName,i=t.dataLayerEventName;window[n]=window[n]||[];const o={event:i},r={};if(e.device_id&&(r.device_id=e.device_id),e.session_id&&(r.session_id=e.session_id),e.tags&&(r.tags=e.tags),Object.keys(r).length>0&&(o.jsonclient=r),Object.keys(o).length>1)return o._clear=!0,window[n].push(o),!0}return!1}"function"!=typeof navigator.sendBeacon&&(o="fetch"),"sendBeacon"===o?navigator.sendBeacon(e,JSON.stringify(t)):!s&&n&&"function"==typeof CompressionStream?(Object.assign(a,{"Content-Encoding":"gzip"}),async function(){const n=new Blob([JSON.stringify(t)],{type:"application/json"}).stream().pipeThrough(new CompressionStream("gzip")),o=await new Response(n),r=await o.blob();await fetch(e,{method:"POST",credentials:"include",headers:a,body:r}).then((e=>{if(!e.ok)throw new Error("HTTP-Error! Status: "+e.status);return e.json()})).then((e=>(c(e,i),e))).catch((e=>{}))}()):fetch(e,{method:"POST",credentials:"include",headers:a,body:JSON.stringify(t)}).then((e=>{if(!e.ok)throw new Error("HTTP-Error! Status: "+e.status);return e.json()})).then((e=>(c(e,i),e))).catch((e=>{}))}