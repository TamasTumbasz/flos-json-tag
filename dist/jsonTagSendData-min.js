function jsonTagSendData(e,n,t,i,o){let a={"Content-Type":"application/json"};function s(e,n){if(n&&!n.idsInDataLayer){const t=n.dataLayerName,i=n.dataLayerEventName;window[t]=window[t]||[];const o={event:i};if(e.device_id&&(o.device_id=e.device_id),e.session_id&&(o.session_id=e.session_id),Object.keys(o).length>1)return window[t].push(o),!0}return!1}"function"!=typeof navigator.sendBeacon&&(o="fetch"),"sendBeacon"===o?navigator.sendBeacon(e,JSON.stringify(n)):t&&"function"==typeof CompressionStream?(Object.assign(a,{"Content-Encoding":"gzip"}),async function(){const t=new Blob([JSON.stringify(n)],{type:"application/json"}).stream().pipeThrough(new CompressionStream("gzip")),o=await new Response(t),r=await o.blob();await fetch(e,{method:"POST",credentials:"include",headers:a,body:r}).then((e=>{if(!e.ok)throw new Error("HTTP-Error! Status: "+e.status);return e.json()})).then((e=>(s(e,i),e))).catch((e=>{}))}()):fetch(e,{method:"POST",credentials:"include",headers:a,body:JSON.stringify(n)}).then((e=>{if(!e.ok)throw new Error("HTTP-Error! Status: "+e.status);return e.json()})).then((e=>(s(e,i),e))).catch((e=>{}))}