function jsonTagSendData(e,n,t,o,s){let i={"Content-Type":"application/json"};function a(e,n){if(n&&!n.responseInDataLayer){const t=n.dataLayerName,o=n.dataLayerEventName;window[t]=window[t]||[];const s={event:o},i={};if(e.device_id&&(i.device_id=e.device_id),e.session_id&&(i.session_id=e.session_id),e.tags&&(i.tags=e.tags),Object.keys(i).length>0&&(s.jsonclient=i),Object.keys(s).length>1)return window[t].push(s),!0}return!1}"function"!=typeof navigator.sendBeacon&&(s="fetch"),"sendBeacon"===s?navigator.sendBeacon(e,JSON.stringify(n)):t&&"function"==typeof CompressionStream?(Object.assign(i,{"Content-Encoding":"gzip"}),async function(){const t=new Blob([JSON.stringify(n)],{type:"application/json"}).stream().pipeThrough(new CompressionStream("gzip")),s=await new Response(t),r=await s.blob();await fetch(e,{method:"POST",credentials:"include",headers:i,body:r}).then((e=>{if(!e.ok)throw new Error("HTTP-Error! Status: "+e.status);return e.json()})).then((e=>(a(e,o),e))).catch((e=>{}))}()):fetch(e,{method:"POST",credentials:"include",headers:i,body:JSON.stringify(n)}).then((e=>{if(!e.ok)throw new Error("HTTP-Error! Status: "+e.status);return e.json()})).then((e=>(a(e,o),e))).catch((e=>{}))}